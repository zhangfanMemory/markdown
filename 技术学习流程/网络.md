# 网络
## 三次握手
A客户端 -> B服务端
A ---- seq(x),SYN ------ > B
B ---- seq(y),ack(x+1),ACk ---- >A
A ---- ack(y+1),seq(x+1),ACK --- > B

![](/技术学习流程/pic/2023-04-09-16-06-11.png)
![](/技术学习流程/pic/2023-04-09-16-06-47.png)
重点：closewait处于客户端发送关闭请求，服务端已反馈该反应，然后服务端还未对客户端发送关闭请求时候产生的
当linux连接中出现大量的close wait会占有连接导致后续请求请求不到，如何解决closewait呢
产生的原因：
    1. 客户端一直在向服务端发送Fin请求，导致，服务端一直处于closewait状态
    2. 服务端一直未关闭，未向客户端发送fin请求  
   
 1. 检查代码问题是否是业务层没有关闭socket连接，该用try resource方式写代码
 2. 客户端timeout时间太短，导致服务端还在处理后续业务没有发送fin的时候客户端timeout超市，导致服务端一直存在closewait