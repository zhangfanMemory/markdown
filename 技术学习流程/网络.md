# 网络
## 三次握手
A客户端 -> B服务端
A ---- seq(x),SYN ------ > B
B ---- seq(y),ack(x+1),ACk ---- >A
A ---- ack(y+1),seq(x+1),ACK --- > B

![](/技术学习流程/pic/2023-04-09-16-06-11.png)
![](/技术学习流程/pic/2023-04-09-16-06-47.png)
重点：closewait处于客户端发送关闭请求，服务端已反馈该反应，然后服务端还未对客户端发送关闭请求时候产生的
当linux连接中出现大量的close wait会占有连接导致后续请求请求不到，如何解决closewait呢
产生的原因：
    1. 客户端一直在向服务端发送Fin请求，导致，服务端一直处于closewait状态
    2. 服务端一直未关闭，未向客户端发送fin请求  
   
 1. 检查代码问题是否是业务层没有关闭socket连接，该用try resource方式写代码
 2. 客户端timeout时间太短，导致服务端还在处理后续业务没有发送fin的时候客户端timeout超市，导致服务端一直存在closewait

## 一个http请求经历过哪些流程
1. DNS服务器，解析域名（baidu.com ） -〉 1.1.1.1
2. 进行tcp的三次握手
3. 发送http请求，如果请求中包含动态语言，服务器使用动态语言解释器进行解释
4. （springMvc流程），dispatcher -> handlerMapping -> handlerAdapter -> handler -> modelAndView
5. 返回客户端
   
## TCP保证传输的可靠性
1. 基于数据块传输
2. 基于数据块的编号，保证顺序及重传
3. 校验数据块，对数据块大小教研
4. 客户端超时重传，定时器监控发送的消息是否有响应，若没有则重传
5. **流量控制**：滑动窗口
6. **拥塞控制**：网络阻塞时候的处理方案，减少网络数据包传输

### 流量控制
用滑动窗口实现流量控制。流量控制是为了**控制发送方发送速率**，保证接收方来得及接收
如果接受方告诉发送方他的窗口为0，则发送方发不出来
产生流程控制的根本原因：接收方和发送方速率不想等，可能出现处理不过来从而丢弃数据，这样白白占用网络资源所以需要流量控制进行接受方和发送方的动态平衡

**Tcp是全双工通信**